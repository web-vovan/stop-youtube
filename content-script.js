chrome.storage.sync.get(['active', 'startTime', 'endTime'], function({active, startTime, endTime}) {
    let today = new Date()
    let time = today.getHours() + ':' + today.getMinutes()

    if (active === true && time <= endTime && time >=startTime) {
        blockYoutubePage(endTime)
    }
});

function blockYoutubePage(endTime)
{
    let htmlElement = document.querySelector("html");
    htmlElement.innerHTML = `
<body>
<div class="wrap">
<div class="logo">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="128" height="128" viewBox="193.1591072182997 122.09000000000002 151.00000000000003 151.00000000000003" xml:space="preserve">
<desc>Created with Fabric.js 4.6.0</desc>
<defs>
</defs>
<g transform="matrix(0.31 0 0 0.31 268.66 197.59)" id="eSCz4UCmlhnXIhpjS9RfO"  >
<path style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(212,36,40); fill-rule: nonzero; opacity: 1;" vector-effect="non-scaling-stroke"  transform=" translate(-236.97, -236.97)" d="M 0 236.966 C 0 106.09329 106.09329 0 236.966 0 C 367.83871 0 473.932 106.09329 473.932 236.966 C 473.932 367.83871 367.83871 473.932 236.966 473.932 C 106.09329 473.932 0 367.83871 0 236.966 z" stroke-linecap="round" />
</g>
<g transform="matrix(0.31 0 0 0.31 279.69 208.18)" id="NQtnkzFekuJl66ujHmPLN"  >
<path style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(204,32,45); fill-rule: nonzero; opacity: 1;" vector-effect="non-scaling-stroke"  transform=" translate(-271.65, -271.65)" d="M 404.518 69.38 C 497.05899999999997 161.929 497.067 311.97299999999996 404.518 404.522 C 311.977 497.063 161.92499999999998 497.067 69.37599999999998 404.522 L 404.518 69.38 z" stroke-linecap="round" />
</g>
<g transform="matrix(0.31 0 0 0.31 289.86 211.54)" id="ERiGmVqFbFYNqxUI9ToG8"  >
<path style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(186,32,46); fill-rule: nonzero; opacity: 1;" vector-effect="non-scaling-stroke"  transform=" translate(-303.64, -280.79)" d="M 470.321 277.964 L 310.843 118.487 L 297.97900000000004 131.351 L 285.11500000000007 118.487 L 271.0160000000001 132.58599999999998 L 280.4860000000001 142.05599999999998 L 277.3950000000001 145.147 L 252.8380000000001 120.58999999999999 L 251.7900000000001 121.645 L 218.6980000000001 88.553 L 204.5990000000001 102.652 L 208.4570000000001 106.51 L 202.79200000000012 112.17500000000001 L 178.9380000000001 88.32100000000001 L 169.0490000000001 98.21000000000001 L 192.3040000000001 154.21300000000002 L 181.83100000000007 197.21000000000004 L 210.46300000000008 225.84900000000005 L 138.04500000000007 230.91500000000005 L 136.94900000000007 356.58200000000005 L 253.48600000000008 473.2610000000001 C 362.678 465.505 451.836 383.833 470.321 277.964 z" stroke-linecap="round" />
</g>
<g transform="matrix(0.31 0 0 0.31 270.36 194.59)" id="5u1LAxheR5JKmigN6c6t4"  >
<path style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(255,255,255); fill-rule: nonzero; opacity: 1;" vector-effect="non-scaling-stroke"  transform=" translate(-241.48, -227.47)" d="M 321.724 291.91 L 306.435 291.91 L 306.51 283.035 C 306.51 279.08700000000005 309.747 275.86600000000004 313.709 275.86600000000004 L 314.689 275.86600000000004 C 318.65200000000004 275.86600000000004 321.903 279.088 321.903 283.035 L 321.724 291.91 z M 264.404 272.89 C 260.539 272.89 257.366 275.498 257.366 278.686 L 257.366 321.847 C 257.366 325.03499999999997 260.539 327.628 264.404 327.628 C 268.299 327.628 271.472 325.03499999999997 271.472 321.847 L 271.472 278.68199999999996 C 271.472 275.498 268.299 272.89 264.404 272.89 z M 357.473 248.752 L 357.473 330.85400000000004 C 357.473 350.55100000000004 340.396 366.663 319.51300000000003 366.663 L 163.444 366.663 C 142.557 366.663 125.48399999999998 350.547 125.48399999999998 330.85400000000004 L 125.48399999999998 248.75200000000004 C 125.48399999999998 229.05500000000004 142.558 212.93600000000004 163.444 212.93600000000004 L 319.517 212.93600000000004 C 340.395 212.936 357.473 229.059 357.473 248.752 z M 173.85 339.771 L 173.843 253.28400000000002 L 193.188 253.29100000000003 L 193.188 240.47200000000004 L 141.61499999999998 240.39300000000003 L 141.61499999999998 252.98800000000003 L 157.71599999999998 253.03700000000003 L 157.71599999999998 339.76700000000005 L 173.84999999999997 339.76700000000005 L 173.84999999999997 339.771 z M 231.847 266.17 L 215.716 266.17 L 215.716 312.351 C 215.716 319.034 216.116 322.375 215.69400000000002 323.55 C 214.377 327.13100000000003 208.48000000000002 330.933 206.186 323.939 C 205.797 322.71200000000005 206.14100000000002 319.01500000000004 206.13400000000001 312.665 L 206.05900000000003 266.166 L 190.01800000000003 266.166 L 190.07800000000003 311.931 C 190.08500000000004 318.947 189.91700000000003 324.178 190.13000000000002 326.558 C 190.52300000000002 330.756 190.37700000000004 335.654 194.28000000000003 338.442 C 201.53200000000004 343.677 215.44300000000004 337.664 218.92300000000003 330.19100000000003 L 218.89300000000003 339.725 L 231.84300000000002 339.744 L 231.84300000000002 266.17 L 231.847 266.17 z M 283.45 319.052 L 283.42 280.613 C 283.40500000000003 265.96 272.449 257.186 257.564 269.04 L 257.63100000000003 240.46000000000004 L 241.51500000000004 240.48600000000005 L 241.43600000000004 339.12300000000005 L 254.68600000000004 338.92800000000005 L 255.89100000000005 332.78000000000003 C 272.83 348.332 283.479 337.683 283.45 319.052 z M 333.941 313.96 L 321.84 314.024 C 321.84 314.507 321.818 315.057 321.81 315.663 L 321.81 322.413 C 321.81 326.024 318.828 328.96500000000003 315.202 328.96500000000003 L 312.83299999999997 328.96500000000003 C 309.2 328.96500000000003 306.21799999999996 326.02400000000006 306.21799999999996 322.413 L 306.21799999999996 321.665 L 306.21799999999996 314.23400000000004 L 306.21799999999996 304.65500000000003 L 333.91499999999996 304.65500000000003 L 333.91499999999996 294.23 C 333.91499999999996 286.61600000000004 333.717 279.00100000000003 333.08799999999997 274.646 C 331.109 260.865 311.77099999999996 258.68 301.998 265.733 C 298.93 267.937 296.591 270.885 295.222 274.852 C 293.849 278.815 293.168 284.221 293.168 291.099 L 293.168 314.017 C 293.178 352.115 339.452 346.73 333.941 313.96 z M 271.895 189.524 C 272.722 191.552 274.013 193.187 275.775 194.429 C 277.5 195.641 279.72299999999996 196.25900000000001 282.375 196.25900000000001 C 284.699 196.25900000000001 286.76 195.63000000000002 288.549 194.33200000000002 C 290.34099999999995 193.04100000000003 291.85299999999995 191.11800000000002 293.08 188.544 L 292.77299999999997 194.875 L 310.75199999999995 194.875 L 310.75199999999995 118.408 L 296.597 118.408 L 296.597 177.921 C 296.597 181.13899999999998 293.93699999999995 183.777 290.692 183.777 C 287.47 183.777 284.802 181.13899999999998 284.802 177.921 L 284.802 118.40799999999999 L 270.033 118.40799999999999 L 270.033 169.981 C 270.033 176.552 270.149 180.933 270.34700000000004 183.156 C 270.559 185.363 271.064 187.477 271.895 189.524 z M 217.408 146.337 C 217.408 138.99599999999998 218.022 133.267 219.23399999999998 129.136 C 220.45399999999998 125.01599999999999 222.66099999999997 121.705 225.84199999999998 119.213 C 229.022 116.702 233.094 115.449 238.033 115.449 C 242.19 115.449 245.756 116.268 248.738 117.866 C 251.72 119.475 254.036 121.559 255.63 124.137 C 257.269 126.723 258.36899999999997 129.383 258.964 132.103 C 259.57 134.857 259.862 139.02200000000002 259.862 144.62300000000002 L 259.862 163.96400000000003 C 259.862 171.05800000000002 259.57800000000003 176.27400000000003 259.028 179.59000000000003 C 258.485 182.91300000000004 257.31100000000004 185.99200000000002 255.49200000000002 188.87700000000004 C 253.69600000000003 191.73600000000005 251.37600000000003 193.87200000000004 248.562 195.23400000000004 C 245.726 196.61500000000004 242.482 197.28800000000004 238.80700000000002 197.28800000000004 C 234.71400000000003 197.28800000000004 231.25600000000003 196.72300000000004 228.41600000000003 195.53700000000003 C 225.56500000000003 194.36200000000002 223.35700000000003 192.58800000000002 221.78900000000002 190.23500000000004 C 220.19500000000002 187.87800000000004 219.084 185.00800000000004 218.41400000000002 181.66300000000004 C 217.733 178.31400000000005 217.41100000000003 173.28900000000004 217.41100000000003 166.58400000000003 L 217.41100000000003 146.33700000000005 L 217.408 146.33700000000005 z M 231.484 176.716 C 231.484 181.041 234.71300000000002 184.577 238.638 184.577 C 242.563 184.577 245.77 181.045 245.77 176.716 L 245.77 136.006 C 245.77 131.681 242.56300000000002 128.145 238.638 128.145 C 234.713 128.145 231.484 131.67700000000002 231.484 136.006 L 231.484 176.716 z M 181.722 197.269 L 198.691 197.269 L 198.706 138.621 L 218.75099999999998 88.38000000000001 L 200.19599999999997 88.38000000000001 L 189.53899999999996 125.70400000000001 L 178.72899999999996 88.28300000000002 L 160.37199999999996 88.28300000000002 L 181.69599999999997 138.65500000000003 L 181.722 197.269 z" stroke-linecap="round" />
</g>
<g transform="matrix(1 0 0 1 268.66 197.59)" id="jyd4zxcUE-fRUxspfROe0"  >
<path style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;" vector-effect="non-scaling-stroke"  transform=" translate(-75, -75)" d="M 75 0 C 33.645 0 0 33.6435 0 75 C 0 116.3565 33.6435 150 75 150 C 116.3565 150 150 116.3565 150 75 C 150 33.6435 116.35499999999999 0 75 0 z M 13.737 75 C 13.737 41.2185 41.22 13.737000000000002 75 13.737000000000002 C 90.2205 13.737000000000002 104.154 19.3305 114.8805 28.554000000000002 L 28.554000000000002 114.8805 C 19.3305 104.154 13.737000000000002 90.2205 13.737000000000002 75 z M 75 136.263 C 61.382999999999996 136.263 48.792 131.7915 38.6085 124.248 L 124.245 38.61150000000001 C 131.7885 48.79500000000001 136.26 61.3845 136.26 75.00300000000001 C 136.26299999999998 108.78150000000002 108.77999999999999 136.2645 74.99849999999999 136.2645 z" stroke-linecap="round" />
</g>
</svg>
</div>
<div class="title">Stop Youtube
<div class="subtitle">Доступ откроется в ${endTime}</div>
</div>
</div>
</body>`;

    window.stop()
}
